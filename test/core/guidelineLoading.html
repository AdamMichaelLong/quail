<!doctype html>
<html>

<head>
  <title>Test that QUAIL loads guidelines dynamically</title>
</head>

<body>
  <p>
    <img src="../assets/rex.jpg" />
  </p>
  <script src="../testrunner.js"></script>
  <script>
    (function(global) {
      global.quailTest = function() {
        asyncTest('quailEventTester', function() {
          expect(1);
          var testPasses = false;
          $.ajax({
            url : '../../dist/tests.json',
            async : false,
            dataType : 'json',
            cache : false,
            success : function(data) {
              if(typeof data === 'object') {
                $(document).quail({
                  jsonPath : '../../dist',
                  guideline : '508',
                  reset : true,
                  accessibilityTests : data,
                  testFailed : function(eventName, thisTest, _case) {
                    if (thisTest.get('name') === 'imgHasAlt') {
                      equal(true, testPasses, 'The test has passed');
                    }
                  }
                });
              }
            }
          });
        });
      };
    })(this);
  </script>
</body>

</html>
