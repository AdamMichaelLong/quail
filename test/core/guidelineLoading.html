<!doctype html>
<html>

<head>
  <title>Test that QUAIL loads guidelines dynamically</title>
</head>

<body>
  <p>
    <img src="../assets/rex.jpg" />
  </p>
  <script src="../testrunner.js"></script>
  <script>
    (function(global) {
      global.quailTest = function() {
        test('quailEventTester', function() {
           var testPasses = false;
           $.ajax({ url : '../../dist/tests.json',
             async : false,
             dataType : 'json',
             cache : false,
             success : function(data) {
                if(typeof data === 'object') {
                  $(document).quail({ jsonPath : '../../dist',
                              guideline : '508',
                              reset : true,
                              accessibilityTests : data,
                              testFailed : function(event) {
                                if(event.testability == 1 && event.testName == 'imgHasAlt') {
                                  testPasses = true;
                                }
                              }});
                }
            }});
            equal(true, testPasses, 'The test has passed');
          });
      };
    })(this);
  </script>
</body>

</html>